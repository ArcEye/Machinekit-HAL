#!/usr/bin/make -f
export DH_VERBOSE = 0
export DEB_BUILD_MAINT_OPTIONS = hardening=+all
export DEB_CFLAGS_MAINT_APPEND  = -Wall -pedantic
export DEB_LDFLAGS_MAINT_APPEND = -Wl,--as-needed

%:
	dh $@  --builddirectory=build

override_dh_auto_configure:
	dh_auto_configure -- \
		-DWITH_RT_PREEMPT=no -DWITH_XENOMAI=no -DWITH_POSIX=yes \
		-DCMAKE_VERBOSE_MAKEFILE=0

override_dh_builddeb:
	dh_builddeb
#	dpkg-deb --build debian/machinekit-hal ..
#	dpkg-deb --build debian/machinekit-hal-posix ..
#	dpkg-deb --build debian/python-machinekit-hal ..
#		dh_builddeb
override_dh_auto_test:
	cmake/runtests
